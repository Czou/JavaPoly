<html>
<head>
  <meta charset="utf-8">
  <title>JavaPoly Tests: Java Source Files</title>
  <link href="mocha/mocha.css" rel="stylesheet" />

  <script type="text/javascript" src="build/javapoly.js"></script>

  <script type="text/x-java-source">
  package com.javapoly.test;
  public class TestCompile1 {
      public static String testIt() {
        return "TestCompile1::testIt()";
      }
  }
  </script>

  <script type="text/x-java-source">
  package com.javapoly.test;
  public class TestCompile2 {
      public static Integer testIt() {
        return 8008;
      }
  }
  </script>

</head>
<body>
  <div id="mocha"></div>

  <script src="expect/umd/expect.min.js"></script>
  <script src="mocha/mocha.js"></script>

  <script type="text/javascript">
    mocha.setup('bdd');
    expect.extend({
      toBeGreaterThanOrEqual(limit) {
        expect.assert(this.actual >= limit, 'expected %s to be greater than or equal to ' + limit, this.actual);
      }
    });

    describe('JavaPoly', function() {
      this.timeout(1000000); // Let jvm to start and do not interrupt promises

      describe('TestCompile1', function() {
        it('static method returns String', function() {
          return Java.type('com.javapoly.test.TestCompile1').then(function(TestCompile1) {
            return TestCompile1.testIt().then(function(result) {
              expect(result).toEqual('TestCompile1::testIt()');
            });
          });
        });
      });

      describe('TestCompile2', function() {
        it('static method returns Integer', function() {
          return Java.type('com.javapoly.test.TestCompile2').then(function(TestCompile2) {
            return TestCompile2.testIt().then(function(result) {
              expect(result).toEqual(8008);
            });
          });
        });
      });
      

    });

    mocha.run();
  </script>
</body>
</html>
